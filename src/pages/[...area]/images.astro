---
import type { InferGetStaticPropsType } from "astro";
import { getCollection } from "astro:content";
import MinimalPage from "../../layouts/pages/MinimalPage.astro";
import BaseHead from "../../layouts/BaseHead.astro";
import ImageGallery from "../../layouts/ImageGallery.astro";
import { slugToName } from "../../utils";
import { getImageImportNameByFolder } from "../../images/Images";
import { GalleryLayout } from "../../layouts/GalleryLayout";

export async function getStaticPaths() {
  return (await getCollection("areas"))
    .map(entry => {
      const { slug: area, data: { images: rawImages } } = entry;
      const images = getImageImportNameByFolder([`images/${area}`], rawImages);
      return ({
        params: { area },
        props: { images, area }
      });
    });
}

type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { area, images } = Astro.props as Props;

const name = slugToName(area);

---
<MinimalPage>
  <BaseHead title={name} noIndex={true} slot="head" />
  <ImageGallery images={images} layout={GalleryLayout.Thumbnails} />
</MinimalPage>
