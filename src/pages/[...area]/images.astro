---
import type { InferGetStaticPropsType } from "astro";
import { getCollection } from "astro:content";

import BaseHead from "../../layouts/BaseHead.astro";
import { GalleryLayout } from "../../layouts/GalleryLayout";
import ImageGallery from "../../layouts/ImageGallery.astro";
import MinimalPage from "../../layouts/pages/MinimalPage.astro";
import { slugToName } from "../../utils";

export async function getStaticPaths() {
  const isDevMode = import.meta.env.MODE === "development";
  if (!isDevMode) return [];
  return (await getCollection("areas"))
    .map(entry => {
      const { slug: area, data: { images } } = entry;
      return ({
        params: { area },
        props: { images, area }
      });
    });
}

type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { area, images } = Astro.props as Props;

const name = slugToName(area);
---
<MinimalPage>
  <BaseHead title={name} noIndex={true} slot="head" />
  <ImageGallery images={images} layout={GalleryLayout.Thumbnails} />
</MinimalPage>
