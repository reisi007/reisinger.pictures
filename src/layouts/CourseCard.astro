---
import type { CollectionEntry } from "astro:content";
import ResponsiveImage from "./ResponsiveImage.astro";
import { GALLERY_BREAKPOINTS, GalleryLayout } from "./GalleryLayout.ts";
import type { NumericBreakpoints } from "../styles/Breakpoints.ts"; // Pfad ggf. anpassen

type Props = {
  course: CollectionEntry<"courses">,
  imageSizeModifiers?: Partial<NumericBreakpoints>
}

const { course, imageSizeModifiers = GALLERY_BREAKPOINTS[GalleryLayout.Overview] } = Astro.props;
const { title, description, price, duration, heroImage } = course.data;
---

<a href={`/kurse/${course.slug}/`} class="not-prose card bg-base-200 shadow-sm hover:shadow-xl transition-shadow no-underline group h-full flex flex-col">
  <figure class="relative">
    <ResponsiveImage
      class="max-h-96"
      sizeModifiers={imageSizeModifiers}
      alt={title}
      name={heroImage}
    />
    {/* Preis-Badge oben rechts im Bild */}
    <div class="absolute top-2 right-2 badge badge-secondary badge-lg font-bold shadow-md">
      {price}
    </div>
  </figure>

  <div class="card-body grow">
    <h3 class="card-title group-hover:text-primary transition-colors">
      {title}
    </h3>

    {/* Dauer Anzeige */}
    <div class="flex items-center justify-center gap-2 text-sm text-base-content/70 mb-2">
      <span class="mdi--clock-outline"></span>
      <span class="font-semibold">{duration}</span>
    </div>

    {description && <p class="text-sm line-clamp-3 mb-4">{description}</p>}

    <div class="card-actions justify-end mt-auto">
      <button class="btn btn-primary btn-sm w-full">Details</button>
    </div>
  </div>
</a>