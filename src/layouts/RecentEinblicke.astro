---
import { getCollection } from "astro:content";
import EinblickCard from "./EinblickCard.astro";

const posts = (await getCollection("einblicke"))
  .sort((a, b) => {
    const aData = a.data;
    const bData = b.data;

    return Math.max(bData.pubDate.valueOf(), bData.updated?.valueOf() ?? Number.MIN_VALUE) - Math.max(aData.pubDate.valueOf(), aData.updated?.valueOf() ?? Number.MIN_VALUE);
  })
  .slice(0, 3);
---

<section class="mx-auto my-4 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3">
  {
    posts.map((post, i) => (
      <div
        class:list={[
          // The second post is hidden by default and becomes visible at the `md` breakpoint
          i === 1 && "hidden md:block",
          // The third post is hidden by default and becomes visible at the `xl` breakpoint
          i === 2 && "hidden xl:block",
        ]}
      >
        <EinblickCard post={post} />
      </div>
    ))
  }
</section>